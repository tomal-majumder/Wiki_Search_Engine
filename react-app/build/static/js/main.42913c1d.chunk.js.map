{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["App","React","Component","constructor","props","super","this","setSearchQuery","query","setState","getStemSearchResults","state","trim","length","isLoading","hasSearched","noAnswer","gotResult","firstTimeSearch","textResults","imageResults","currentPage","axios","get","params","optionName","searchType","then","response","data","textResult","imageResult","success","result","searchTime","catch","err","console","log","setSearchType","event","target","value","scrollToResults","newPage","resultsRef","current","scrollIntoView","behavior","openModal","filename","selectedImage","showModal","closeModal","shareImage","url","navigator","clipboard","writeText","alert","resultsPerPage","createRef","render","S3_BUCKET_URL","process","results","totalResults","startIndex","endIndex","paginatedResults","slice","createElement","Container","fluid","Row","className","Col","md","lg","type","placeholder","onChange","e","Button","variant","onClick","ClipLoader","size","color","checked","ref","style","fontSize","map","index","key","animationDelay","href","rel","docId","chunkedBody","src","alt","onError","display","Math","min","disabled","stopPropagation","window","open","reportWebVitals","onPerfEntry","Function","__webpack_require__","bind","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"0RAiReA,MAxQf,cAAkBC,IAAMC,UACtBC,YAAYC,GACVC,MAAMD,GAAOE,KAsBfC,eAAkBC,KAChBF,KAAKG,SAAS,CAAED,YACjBF,KAEDI,qBAAuB,MACrB,MAAMF,EAAQF,KAAKK,MAAMH,MAAMI,OACV,IAAjBJ,EAAMK,SAEVP,KAAKG,SAAS,CACZK,WAAW,EACXC,aAAa,EACbC,UAAU,EACVC,WAAW,EACXC,iBAAiB,EACjBC,YAAa,GACbC,aAAc,GACdC,YAAa,IAKfC,IAAMC,IAAI,uCAA0B,CAClCC,OAAQ,CACNC,WAAYnB,KAAKK,MAAMc,WACvBC,WAAYpB,KAAKK,MAAMe,WACvBlB,MAAOA,KAERmB,KAAMC,IACPtB,KAAKG,SAAS,CACZK,WAAW,EACXK,YAAaS,EAASC,KAAKC,WAC3BV,aAAcQ,EAASC,KAAKE,eAGA,IAA1BH,EAASC,KAAKG,SAAoD,IAAhCJ,EAASC,KAAKI,OAAOpB,OACzDP,KAAKG,SAAS,CAAEO,UAAU,EAAME,iBAAiB,IAEjDZ,KAAKG,SAAS,CACZQ,WAAW,EACXD,UAAU,EACVkB,WAAYN,EAASC,KAAKK,eAG7BC,MAAMC,IACP9B,KAAKG,SAAS,CACZQ,WAAW,EACXD,UAAU,EACVF,WAAW,IAEbuB,QAAQC,IAAIF,QAEf9B,KAEDiC,cAAiBC,KACflC,KAAKG,SAAS,CAAEiB,WAAYc,EAAMC,OAAOC,MAAOrB,YAAa,MAC9Df,KAEDqC,gBAAmBC,KACjBtC,KAAKG,SAAS,CAAEY,YAAauB,GAAW,KAClCtC,KAAKuC,WAAWC,SAClBxC,KAAKuC,WAAWC,QAAQC,eAAe,CAAEC,SAAU,eAGxD1C,KAGD2C,UAAaC,KACX5C,KAAKG,SAAS,CAAE0C,cAAeD,EAAUE,WAAW,MACrD9C,KAED+C,WAAa,MACX/C,KAAKG,SAAS,CAAE0C,cAAe,KAAMC,WAAW,MACjD9C,KAEDgD,WAAcC,KACZC,UAAUC,UAAUC,UAAUH,GAC9BI,MAAM,oCAjGNrD,KAAKK,MAAQ,CACXH,MAAO,GACPW,YAAa,GACbC,aAAc,GACdN,WAAW,EACXE,UAAU,EACVC,WAAW,EACXS,WAAY,OACZR,iBAAiB,EACjBgB,WAAY,EACZnB,aAAa,EACbU,WAAY,QACZJ,YAAa,EACbuC,eAAgB,GAChBR,WAAW,EACXD,cAAe,MAGjB7C,KAAKuC,WAAa5C,IAAM4D,YAkF1BC,SACE,MAAMC,EAAgBC,gEAEhB3C,YACJA,EAAWuC,eAAEA,EAAclC,WAAEA,EAAUP,YACvCA,EAAWC,aAAEA,EAAYgC,UAAEA,EAASD,cAAEA,GACpC7C,KAAKK,MAEHsD,EAAyB,SAAfvC,EAAwBP,EAAcC,EAChD8C,EAAeD,EAAQpD,OACvBsD,GAAc9C,EAAc,GAAKuC,EACjCQ,EAAWD,EAAaP,EACxBS,EAAmBJ,EAAQK,MAAMH,EAAYC,GAEnD,OACEnE,IAAAsE,cAAA,WAUEtE,IAAAsE,cAACC,IAAS,CAACC,OAAK,GACdxE,IAAAsE,cAACG,IAAG,CAACC,UAAU,0BACb1E,IAAAsE,cAACK,IAAG,CAACC,GAAG,QACN5E,IAAAsE,cAAA,MAAII,UAAU,kBAAiB,kBAC7BrE,KAAKK,MAAMI,aACXd,IAAAsE,cAAA,KAAGI,UAAU,qBAAoB,iEAOvC1E,IAAAsE,cAAA,OAAKI,2BAA4BrE,KAAKK,MAAMI,YAAc,WAAa,MACrEd,IAAAsE,cAACG,IAAG,CAACC,UAAU,kDACb1E,IAAAsE,cAACK,IAAG,CAACE,GAAI,GACP7E,IAAAsE,cAAA,OAAKI,UAAU,gBACb1E,IAAAsE,cAAA,SACEQ,KAAK,OACLJ,UAAU,2CACVK,YAAY,uFACZC,SAAUzC,GAASlC,KAAKC,eAAeiC,EAAMC,OAAOC,SAEtDzC,IAAAsE,cAAA,UACEI,UAAU,6BACVM,SAAWC,GAAM5E,KAAKG,SAAS,CAAEgB,WAAYyD,EAAEzC,OAAOC,SAEtDzC,IAAAsE,cAAA,UAAQ7B,MAAM,SAAQ,UACtBzC,IAAAsE,cAAA,UAAQ7B,MAAM,QAAO,SAEvBzC,IAAAsE,cAACY,IAAM,CAACR,UAAU,SAASS,QAAQ,UAAUC,QAAS/E,KAAKI,sBACxDJ,KAAKK,MAAMG,UAAYb,IAAAsE,cAACe,IAAU,CAACC,KAAM,GAAIC,MAAM,SAAY,aAMxEvF,IAAAsE,cAACG,IAAG,CAACC,UAAU,+BACb1E,IAAAsE,cAACK,IAAG,CAACE,GAAI,GACP7E,IAAAsE,cAAA,OAAKI,UAAU,wCAAuC,iHAMzDrE,KAAKK,MAAMI,aACVd,IAAAsE,cAAA,OAAKI,UAAU,sCACb1E,IAAAsE,cAAA,aACEtE,IAAAsE,cAAA,SAAOQ,KAAK,QAAQrC,MAAM,OAAO+C,QAAwB,SAAf/D,EAAuBuD,SAAU3E,KAAKiC,gBAChFtC,IAAAsE,cAAA,QAAMI,UAAU,aAAY,SAE9B1E,IAAAsE,cAAA,aACEtE,IAAAsE,cAAA,SAAOQ,KAAK,QAAQrC,MAAM,QAAQ+C,QAAwB,UAAf/D,EAAwBuD,SAAU3E,KAAKiC,gBAClFtC,IAAAsE,cAAA,QAAMI,UAAU,QAAO,WAK5BrE,KAAKK,MAAMI,aACVd,IAAAsE,cAACG,IAAG,CAACgB,IAAKpF,KAAKuC,WAAY8B,UAAU,0CACnC1E,IAAAsE,cAACK,IAAG,CAACE,GAAI,GACNxE,KAAKK,MAAMM,WACVhB,IAAAsE,cAAA,OAAKI,UAAU,OAAOgB,MAAO,CAAEC,SAAU,SAAU,2BACzB3F,IAAAsE,cAAA,YAAOjE,KAAKK,MAAMuB,YAAkB,aAI/D5B,KAAKK,MAAMK,WAAaV,KAAKK,MAAMG,WAClCb,IAAAsE,cAAA,OAAKoB,MAAO,CAAEC,SAAU,SAAU,4BAKpB,SAAflE,GAAyB2C,EAAiBwB,IAAI,CAAC5D,EAAQ6D,IACtD7F,IAAAsE,cAAA,OAAKwB,IAAKD,EAAOnB,UAAU,8BAA8BgB,MAAO,CAAEK,kBAA2B,IAARF,QACnF7F,IAAAsE,cAAA,KAAG0B,KAAMhE,EAAOsB,IAAKd,OAAO,SAASyD,IAAI,uBAAuBjE,EAAOkE,OACvElG,IAAAsE,cAAA,OAAKoB,MAAO,CAAEC,SAAU,SAAW3D,EAAOmE,YAAY,QAI1C,UAAf1E,GACCzB,IAAAsE,cAAA,OAAKI,UAAU,cACZN,EAAiBwB,IAAI,CAAC3C,EAAU4C,IAC/B7F,IAAAsE,cAAA,OACEwB,IAAKD,EACLO,OAAQtC,KAAiBb,QACzBoD,WAAYR,IACZT,QAASA,IAAM/E,KAAK2C,UAAUC,GAC9BqD,QAAUrB,IAAQA,EAAEzC,OAAOkD,MAAMa,QAAU,YAMlDtC,EAAe,GACdjE,IAAAsE,cAAA,OAAKI,UAAU,yDAAyDgB,MAAO,CAAEC,SAAU,SACzF3F,IAAAsE,cAAA,YAAM,WACKJ,EAAa,EAAE,SAAEsC,KAAKC,IAAItC,EAAUF,GAAc,OAAKA,EAAa,YAE/EjE,IAAAsE,cAAA,WACEtE,IAAAsE,cAACY,IAAM,CAACR,UAAU,cAAcgC,SAA0B,IAAhBtF,EAAmBgE,QAASA,IAAM/E,KAAKqC,gBAAgBtB,EAAc,IAAI,QAGnHpB,IAAAsE,cAACY,IAAM,CAACR,UAAU,SAASgC,SAAUvC,GAAYF,EAAcmB,QAASA,IAAM/E,KAAKqC,gBAAgBtB,EAAc,IAAI,YAUhI+B,GACCnD,IAAAsE,cAAA,OAAKI,UAAU,eAAeU,QAAS/E,KAAK+C,YAC1CpD,IAAAsE,cAAA,OACE8B,OAAQtC,KAAiBZ,QACzBmD,IAAI,SACJjB,QAAUH,GAAMA,EAAE0B,oBAEpB3G,IAAAsE,cAAA,OAAKI,UAAU,iBACb1E,IAAAsE,cAAA,UAAQc,QAASA,IAAMwB,OAAOC,QAAQ/C,KAAiBZ,QAAqB,WAAW,YAGvFlD,IAAAsE,cAAA,UAAQc,QAASA,IAAM/E,KAAKgD,cAAcS,KAAiBZ,UAAsB,gBCxPpF4D,MAZSC,IAClBA,GAAeA,aAAuBC,UACxCC,EAAAhC,EAAA,GAAAvD,KAAAuF,EAAAC,KAAA,UAAqBxF,KAAKyF,IAAiD,IAAhDC,OAAEA,EAAMC,OAAEA,EAAMC,OAAEA,EAAMC,OAAEA,EAAMC,QAAEA,GAASL,EACpEC,EAAOL,GACPM,EAAON,GACPO,EAAOP,GACPQ,EAAOR,GACPS,EAAQT,YCAdU,IAAS5D,OACP7D,IAAAsE,cAACtE,IAAM0H,WAAU,KACf1H,IAAAsE,cAACvE,EAAG,OAEN4H,SAASC,eAAe,SAM1Bd","file":"static/js/main.42913c1d.chunk.js","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport { Button } from 'react-bootstrap';\nimport ClipLoader from \"react-spinners/ClipLoader\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      query: \"\",\n      textResults: [],\n      imageResults: [],\n      isLoading: false,\n      noAnswer: false,\n      gotResult: false,\n      searchType: \"TEXT\",\n      firstTimeSearch: true,\n      searchTime: 0,\n      hasSearched: false,\n      optionName: \"tfidf\",\n      currentPage: 1,\n      resultsPerPage: 10,\n      showModal: false,\n      selectedImage: null\n    };\n\n    this.resultsRef = React.createRef();\n  }\n\n  setSearchQuery = (query) => {\n    this.setState({ query });\n  }\n\n  getStemSearchResults = () => {\n    const query = this.state.query.trim();\n    if (query.length === 0) return;\n\n    this.setState({\n      isLoading: true,\n      hasSearched: true,\n      noAnswer: false,\n      gotResult: false,\n      firstTimeSearch: false,\n      textResults: [],\n      imageResults: [],\n      currentPage: 1\n    });\n\n    const API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:3001';\n\n    axios.get(`${API_BASE}/query-stem`, {\n      params: {\n        optionName: this.state.optionName,\n        searchType: this.state.searchType,\n        query: query\n      }\n    }).then((response) => {\n      this.setState({\n        isLoading: false,\n        textResults: response.data.textResult,\n        imageResults: response.data.imageResult\n      });\n\n      if (response.data.success === true && response.data.result.length === 0) {\n        this.setState({ noAnswer: true, firstTimeSearch: true });\n      } else {\n        this.setState({\n          gotResult: true,\n          noAnswer: false,\n          searchTime: response.data.searchTime\n        });\n      }\n    }).catch(err => {\n      this.setState({\n        gotResult: false,\n        noAnswer: false,\n        isLoading: false\n      });\n      console.log(err);\n    });\n  }\n\n  setSearchType = (event) => {\n    this.setState({ searchType: event.target.value, currentPage: 1 });\n  }\n\n  scrollToResults = (newPage) => {\n    this.setState({ currentPage: newPage }, () => {\n      if (this.resultsRef.current) {\n        this.resultsRef.current.scrollIntoView({ behavior: 'smooth' });\n      }\n    });\n  }\n\n\n  openModal = (filename) => {\n    this.setState({ selectedImage: filename, showModal: true });\n  }\n\n  closeModal = () => {\n    this.setState({ selectedImage: null, showModal: false });\n  }\n\n  shareImage = (url) => {\n    navigator.clipboard.writeText(url);\n    alert(\"Image URL copied to clipboard!\");\n  }\n\n  render() {\n    const S3_BUCKET_URL = process.env.REACT_APP_S3_BUCKET_URL || 'https://your-bucket-name.s3.amazonaws.com';\n\n    const {\n      currentPage, resultsPerPage, searchType,\n      textResults, imageResults, showModal, selectedImage\n    } = this.state;\n\n    const results = searchType === \"TEXT\" ? textResults : imageResults;\n    const totalResults = results.length;\n    const startIndex = (currentPage - 1) * resultsPerPage;\n    const endIndex = startIndex + resultsPerPage;\n    const paginatedResults = results.slice(startIndex, endIndex);\n\n    return (\n      <div>\n        {/* <Button\n          variant=\"outline-secondary\"\n          size=\"sm\"\n          onClick={this.toggleDarkMode}\n          style={{ position: 'absolute', top: 10, right: 10, zIndex: 2000 }}\n        >\n          Toggle Dark Mode\n        </Button> */}\n\n        <Container fluid>\n          <Row className=\"justify-content-center\">\n            <Col md=\"auto\">\n              <h1 className=\"branding-title\">WikiSearch IR</h1>\n              {!this.state.hasSearched && (\n                <p className=\"branding-subtitle\">\n                  Real-time ranked retrieval over a curated Wikipedia corpus.\n                </p>\n              )}\n            </Col>\n          </Row>\n\n          <div className={`search-header ${this.state.hasSearched ? 'float-up' : ''}`}>\n            <Row className=\"mt-4 justify-content-center align-items-center\">\n              <Col lg={8}>\n                <div className=\"d-flex gap-2\">\n                  <input\n                    type=\"text\"\n                    className=\"form-control form-control-lg flex-grow-1\"\n                    placeholder=\"üîç Search football or world war topics (i.e. Fifa World Cup or Dunkirk)...\"\n                    onChange={event => this.setSearchQuery(event.target.value)}\n                  />\n                  <select\n                    className=\"form-select form-select-lg\"\n                    onChange={(e) => this.setState({ optionName: e.target.value })}\n                  >\n                    <option value=\"tfidf\">TF-IDF</option>\n                    <option value=\"bm25\">BM25</option>\n                  </select>\n                  <Button className=\"btn-lg\" variant=\"primary\" onClick={this.getStemSearchResults}>\n                    {this.state.isLoading ? <ClipLoader size={18} color=\"#fff\" /> : \"Search\"}\n                  </Button>\n                </div>\n              </Col>\n            </Row>\n\n            <Row className=\"mt-3 justify-content-center\">\n              <Col lg={9}>\n                <div className=\"alert alert-info p-2 small shadow-sm\">\n                  ‚ö†Ô∏è This is a demo search engine built over a small test corpus of football and world war content.\n                </div>\n              </Col>\n            </Row>\n\n            {this.state.hasSearched && (\n              <div className=\"radio-toggle mt-4 mb-3 text-center\">\n                <label>\n                  <input type=\"radio\" value=\"TEXT\" checked={searchType === \"TEXT\"} onChange={this.setSearchType} />\n                  <span className=\"ms-2 me-4\">Text</span>\n                </label>\n                <label>\n                  <input type=\"radio\" value=\"IMAGE\" checked={searchType === \"IMAGE\"} onChange={this.setSearchType} />\n                  <span className=\"ms-2\">Image</span>\n                </label>\n              </div>\n            )}\n\n            {this.state.hasSearched && (\n              <Row ref={this.resultsRef} className=\"justify-content-center results-section\">\n                <Col lg={8}>\n                  {this.state.gotResult && (\n                    <div className=\"mt-3\" style={{ fontSize: \"12px\" }}>\n                      Search results found in <span>{this.state.searchTime}</span> seconds.\n                    </div>\n                  )}\n\n                  {this.state.noAnswer && !this.state.isLoading && (\n                    <div style={{ fontSize: \"14px\" }}>\n                      No search results found.\n                    </div>\n                  )}\n\n                  {searchType === \"TEXT\" && paginatedResults.map((result, index) => (\n                    <div key={index} className=\"mt-3 search-result-animated\" style={{ animationDelay: `${index * 100}ms` }}>\n                      <a href={result.url} target=\"_blank\" rel=\"noopener noreferrer\">{result.docId}</a>\n                      <div style={{ fontSize: \"12px\" }}>{result.chunkedBody}..</div>\n                    </div>\n                  ))}\n\n                  {searchType === \"IMAGE\" && (\n                    <div className=\"image-grid\">\n                      {paginatedResults.map((filename, index) => (\n                        <img\n                          key={index}\n                          src={`${S3_BUCKET_URL}/${filename}.jpg`}\n                          alt={`img-${index}`}\n                          onClick={() => this.openModal(filename)}\n                          onError={(e) => { e.target.style.display = 'none'; }}\n                        />\n                      ))}\n                    </div>\n                  )}\n\n                  {totalResults > 0 && (\n                    <div className=\"mt-4 d-flex justify-content-between align-items-center\" style={{ fontSize: \"13px\" }}>\n                      <span>\n                        Showing {startIndex + 1}‚Äì{Math.min(endIndex, totalResults)} of {totalResults} results\n                      </span>\n                      <div>\n                        <Button className=\"btn-sm me-2\" disabled={currentPage === 1} onClick={() => this.scrollToResults(currentPage - 1)}>\n                          Prev\n                        </Button>\n                        <Button className=\"btn-sm\" disabled={endIndex >= totalResults} onClick={() => this.scrollToResults(currentPage + 1)}>\n                          Next\n                        </Button>\n                      </div>\n                    </div>\n                  )}\n                </Col>\n              </Row>\n            )}\n\n            {showModal && (\n              <div className=\"custom-modal\" onClick={this.closeModal}>\n                <img\n                  src={`${S3_BUCKET_URL}/${selectedImage}.jpg`}\n                  alt=\"Zoomed\"\n                  onClick={(e) => e.stopPropagation()}\n                />\n                <div className=\"modal-actions\">\n                  <button onClick={() => window.open(`${S3_BUCKET_URL}/${selectedImage}.jpg`, '_blank')}>\n                    Download\n                  </button>\n                  <button onClick={() => this.shareImage(`${S3_BUCKET_URL}/${selectedImage}.jpg`)}>\n                    Share\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}