(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(42)},24:function(e,t,a){},25:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var s=a(1),l=a.n(s),n=a(16),r=a.n(n),c=(a(24),a(45)),i=(a(25),a(17)),o=a(7),m=a(8),h=a(46),u=a(18),d=a.n(u);var g=class extends l.a.Component{constructor(e){super(e),this.setSearchQuery=(e=>{this.setState({query:e})}),this.getStemSearchResults=(()=>{const e=this.state.query.trim();0!==e.length&&(this.setState({isLoading:!0,hasSearched:!0,noAnswer:!1,gotResult:!1,firstTimeSearch:!1,textResults:[],imageResults:[],currentPage:1}),c.a.get("http://18.191.52.209:3001/query-stem",{params:{optionName:this.state.optionName,searchType:this.state.searchType,query:e}}).then(e=>{this.setState({isLoading:!1,textResults:e.data.textResult,imageResults:e.data.imageResult}),!0===e.data.success&&0===e.data.result.length?this.setState({noAnswer:!0,firstTimeSearch:!0}):this.setState({gotResult:!0,noAnswer:!1,searchTime:e.data.searchTime})}).catch(e=>{this.setState({gotResult:!1,noAnswer:!1,isLoading:!1}),console.log(e)}))}),this.setSearchType=(e=>{this.setState({searchType:e.target.value,currentPage:1})}),this.scrollToResults=(e=>{this.setState({currentPage:e},()=>{this.resultsRef.current&&this.resultsRef.current.scrollIntoView({behavior:"smooth"})})}),this.openModal=(e=>{window.scrollTo(0,0);const t=this.state.imageResults.indexOf(e);this.setState({selectedImage:e,showModal:!0,currentImageIndex:t})}),this.closeModal=(()=>{this.setState({selectedImage:null,showModal:!1})}),this.prevImage=(()=>{this.setState(e=>{const t=(e.currentImageIndex-1+e.imageResults.length)%e.imageResults.length;return{selectedImage:e.imageResults[t],currentImageIndex:t}})}),this.nextImage=(()=>{this.setState(e=>{const t=(e.currentImageIndex+1)%e.imageResults.length;return{selectedImage:e.imageResults[t],currentImageIndex:t}})}),this.shareImage=(e=>{navigator.clipboard.writeText(e),alert("Image URL copied to clipboard!")}),this.state={query:"",textResults:[],imageResults:[],isLoading:!1,noAnswer:!1,gotResult:!1,searchType:"TEXT",firstTimeSearch:!0,searchTime:0,hasSearched:!1,optionName:"tfidf",currentPage:1,resultsPerPage:10,showModal:!1,selectedImage:null,currentImageIndex:0},this.resultsRef=l.a.createRef()}render(){const e="https://wiki-search-images.s3.us-east-2.amazonaws.com/images",{currentPage:t,resultsPerPage:a,searchType:s,textResults:n,imageResults:r,showModal:c,selectedImage:u}=this.state,g="TEXT"===s?n:r,p=g.length,E=(t-1)*a,f=E+a,S=g.slice(E,f);return l.a.createElement("div",null,l.a.createElement(i.a,{fluid:!0},l.a.createElement(o.a,{className:"justify-content-center"},l.a.createElement(m.a,{md:"auto"},l.a.createElement("h1",{className:"branding-title"},"WikiSearch IR"),!this.state.hasSearched&&l.a.createElement("p",{className:"branding-subtitle"},"Real-time ranked retrieval over a curated Wikipedia corpus."))),l.a.createElement("div",{className:`search-header ${this.state.hasSearched?"float-up":""}`},l.a.createElement(o.a,{className:"mt-4 justify-content-center align-items-center"},l.a.createElement(m.a,{lg:10},l.a.createElement("div",{className:"d-flex gap-2"},l.a.createElement("input",{type:"text",className:"form-control form-control-lg flex-grow-1",placeholder:"\ud83d\udd0d Search football or world war topics (i.e. Fifa World Cup or Dunkirk)...",onChange:e=>this.setSearchQuery(e.target.value)}),l.a.createElement("select",{className:"form-select form-select-lg",onChange:e=>this.setState({optionName:e.target.value})},l.a.createElement("option",{value:"tfidf"},"TF-IDF"),l.a.createElement("option",{value:"bm25"},"BM25")),l.a.createElement(h.a,{className:"btn-lg",variant:"primary",onClick:this.getStemSearchResults},this.state.isLoading?l.a.createElement(d.a,{size:18,color:"#fff"}):"Search")))),l.a.createElement(o.a,{className:"mt-3 justify-content-center"},l.a.createElement(m.a,{lg:9},l.a.createElement("div",{className:"alert alert-info p-2 small shadow-sm"},"\u26a0\ufe0f This demo search engine runs on a limited test dataset due to resource constraints. Ranking result does not represent full-scale performance."))),this.state.hasSearched&&l.a.createElement("div",{className:"radio-toggle mt-4 mb-3 text-center"},l.a.createElement("label",null,l.a.createElement("input",{type:"radio",value:"TEXT",checked:"TEXT"===s,onChange:this.setSearchType}),l.a.createElement("span",{className:"ms-2 me-4"},"Text")),l.a.createElement("label",null,l.a.createElement("input",{type:"radio",value:"IMAGE",checked:"IMAGE"===s,onChange:this.setSearchType}),l.a.createElement("span",{className:"ms-2"},"Image"))),this.state.hasSearched&&l.a.createElement(o.a,{ref:this.resultsRef,className:"justify-content-center results-section"},l.a.createElement(m.a,{lg:8},this.state.gotResult&&l.a.createElement("div",{className:"mt-3",style:{fontSize:"12px"}},"Search results found in ",l.a.createElement("span",null,this.state.searchTime)," seconds."),this.state.noAnswer&&!this.state.isLoading&&l.a.createElement("div",{style:{fontSize:"14px"}},"No search results found."),"TEXT"===s&&S.map((e,t)=>l.a.createElement("div",{key:t,className:"mt-3 search-result-animated",style:{animationDelay:`${100*t}ms`}},l.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.docId),l.a.createElement("div",{style:{fontSize:"12px"}},e.chunkedBody,".."))),"IMAGE"===s&&l.a.createElement("div",{className:"image-grid"},S.map((t,a)=>l.a.createElement("img",{key:a,src:`${e}/${t}.jpg`,alt:`img-${a}`,className:"image-item",onClick:()=>this.openModal(t),onError:e=>{e.target.style.display="none"}}))),p>0&&l.a.createElement("div",{className:"mt-4 d-flex justify-content-between align-items-center",style:{fontSize:"13px"}},l.a.createElement("span",null,"Showing ",E+1,"\u2013",Math.min(f,p)," of ",p," results"),l.a.createElement("div",null,l.a.createElement(h.a,{className:"btn-sm me-2",disabled:1===t,onClick:()=>this.scrollToResults(t-1)},"Prev"),l.a.createElement(h.a,{className:"btn-sm",disabled:f>=p,onClick:()=>this.scrollToResults(t+1)},"Next"))))),c&&l.a.createElement("div",{className:"image-modal",onClick:this.closeModal},l.a.createElement("div",{className:"modal-content",onClick:e=>e.stopPropagation()},l.a.createElement("span",{className:"modal-close",onClick:this.closeModal},"\xd7"),l.a.createElement("button",{className:"modal-nav modal-prev",onClick:this.prevImage},"<"),l.a.createElement("img",{src:`${e}/${u}.jpg`,alt:"Zoomed"}),l.a.createElement("button",{className:"modal-nav modal-next",onClick:this.nextImage},">"),l.a.createElement("div",{className:"modal-actions"},l.a.createElement("button",{onClick:()=>window.open(`${e}/${u}.jpg`,"_blank")},"Download"),l.a.createElement("button",{onClick:()=>this.shareImage(`${e}/${u}.jpg`)},"Share")))))))}};var p=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,47)).then(t=>{let{getCLS:a,getFID:s,getFCP:l,getLCP:n,getTTFB:r}=t;a(e),s(e),l(e),n(e),r(e)})};a(40);r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(g,null)),document.getElementById("root")),p()}},[[19,1,2]]]);
//# sourceMappingURL=main.ac6672f2.chunk.js.map